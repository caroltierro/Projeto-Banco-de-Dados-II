CREATE TABLE CATEGORIA (
CODIGO NUMBER CONSTRAINT PK_codcategoria PRIMARY KEY CONSTRAINT
nn_codcategoria NOT NULL,
DESCRICAO VARCHAR2 (100) CONSTRAINT nn_desccategoria NOT NULL,
RESUMO VARCHAR2 (4000) CONSTRAINT nn_resumocategoria NOT NULL
)--;

CREATE TABLE PRODUTOS (
CODIGO NUMBER CONSTRAINT PK_CODPRODUTO PRIMARY KEY CONSTRAINT
nn_CODPRODUTO NOT NULL,
DESCRICAO VARCHAR2 (100) CONSTRAINT nn_DESCPRODUTO NOT NULL,
PRECO NUMBER (14,2) CONSTRAINT nn_PRECOPRODUTO NOT NULL,
CATEGORIA NUMBER CONSTRAINT nn_CATEGORIA NOT NULL , CONSTRAINT
FK_CATEGORIA FOREIGN KEY (CATEGORIA) REFERENCES CATEGORIA(CODIGO)
)--
;
CREATE TABLE ITEM (
PRODUTO NUMBER CONSTRAINT NN_PRODITEM NOT NULL, CONSTRAINT
FK_PRODUTOITEM FOREIGN KEY (PRODUTO) REFERENCES PRODUTOS (CODIGO),
PEDIDO NUMBER CONSTRAINT NN_PEDIDOITEM NOT NULL, CONSTRAINT
FK_PEDIDOITEM FOREIGN KEY (PEDIDO) REFERENCES PEDIDO (CODIGO),
QUANTIDADE NUMBER CONSTRAINT NN_QUANTITEM NOT NULL
);--
CREATE TABLE PEDIDO (
CODIGO NUMBER CONSTRAINT PK_CODPEDIDO PRIMARY KEY,
CLIENTE NUMBER CONSTRAINT NN_CLIENTPEDIDO NOT NULL, CONSTRAINT
FK_CLIENTE FOREIGN KEY (CLIENTE) REFERENCES CLIENTES (CODIGO),
FUNCIONARIO NUMBER CONSTRAINT NN_FUNCPEDIDO NOT NULL, CONSTRAINT
FK_FUNCIONARIO FOREIGN KEY (FUNCIONARIO) REFERENCES
FUNCIONARIOSS(CODIGO),
DTAPEDIDO DATE CONSTRAINT NN_DTAPEDIDO NOT NULL,
OBSERVACAO VARCHAR(4000) CONSTRAINT NN_OBSPEDIDO NOT NULL
);--
CREATE TABLE FUNCIONARIOSS (
CODIGO NUMBER CONSTRAINT PK_CODIGFUNC PRIMARY KEY,
NOME VARCHAR2 (100) CONSTRAINT NN_NOMEEFUNC NOT NULL,
SUPERVISOR NUMBER CONSTRAINT NN_SUPERVISOR NOT NULL ,CONSTRAINT
FK_SUPERVISOR FOREIGN KEY (SUPERVISOR) REFERENCES FUNCIONARIOSS
(CODIGO)
)--
;

CREATE TABLE ENDERECOO (

CODIGO NUMBER CONSTRAINT PK_CODEND PRIMARY KEY,
CLIENTE NUMBER CONSTRAINT NN_CLIENTEND NOT NULL,CONSTRAINT
FK_CLIENTEND FOREIGN KEY (CLIENTE) REFERENCES CLIENTES,
LOGRADURO VARCHAR2(100) CONSTRAINT NN_LOGRADOURO NOT NULL,
NUMERO VARCHAR (10) CONSTRAINT NN_NUMERO NOT NULL,
CIDADE VARCHAR (150) CONSTRAINT NN_CIDADE NOT NULL,
ESTADO VARCHAR2 (2) CONSTRAINT NN_UF NOT NULL
);--
SELECT * FROM ENDERECOO;
CREATE TABLE CLIENTES (
CODIGO NUMBER CONSTRAINT PK_CLIENTEE PRIMARY KEY,
NOME VARCHAR2 (100) CONSTRAINT NN_NOMECLIENTE NOT NULL,
TELEFONE VARCHAR (20) CONSTRAINT NN_FONECLIENTE NOT NULL
);--
-----------------------------------------------------------------/
CREATE SEQUENCE SEQCLIENTE
MINVALUE 1
MAXVALUE 9999
START WITH 1
INCREMENT BY 1
CACHE 20;
CREATE SEQUENCE SEQENDERECO
MINVALUE 1
MAXVALUE 9999
START WITH 1
INCREMENT BY 1
CACHE 20;
CREATE SEQUENCE SEQPESSOA
MINVALUE 1
MAXVALUE 9999
START WITH 1
INCREMENT BY 1
CACHE 20;
CREATE SEQUENCE SEQPEDIDO
MINVALUE 1
MAXVALUE 9999
START WITH 1
INCREMENT BY 1
CACHE 20;
CREATE SEQUENCE SEQCATEGORIA
MINVALUE 1
MAXVALUE 9999
START WITH 1
INCREMENT BY 1
CACHE 20;

CREATE SEQUENCE SEQPRODUTO
MINVALUE 1
MAXVALUE 9999
START WITH 1
INCREMENT BY 1
CACHE 20;
SELECT * FROM CATEGORIA;
------------------------------------------------------------------/
INSERT INTO CATEGORIA (CODIGO, DESCRICAO, RESUMO)
VALUES (SEQCATEGORIA.NEXTVAL, 'Máquina de Café Automática', 'Desperte seus
sentidos com o aroma irresistível de café fresco todas as manhãs. A Máquina de Café
Automática torna a experiência de fazer café rápida, conveniente e deliciosa.');
INSERT INTO CATEGORIA (CODIGO, DESCRICAO, RESUMO)
VALUES (SEQCATEGORIA.NEXTVAL, 'Fones de Ouvido Bluetooth', 'Transforme sua
experiência auditiva com os Fones de Ouvido Bluetooth. Liberte-se dos fios enquanto
desfruta de áudio imersivo e conforto excepcional em qualquer lugar.');
INSERT INTO CATEGORIA (CODIGO, DESCRICAO, RESUMO)
VALUES (SEQCATEGORIA.NEXTVAL, 'Mochila Técnica para Excursões', 'Leve tudo o que
precisa para sua próxima aventura com a Mochila Técnica para Excursões. Organização,
durabilidade e conforto em um único equipamento.');
INSERT INTO CATEGORIA (CODIGO, DESCRICAO, RESUMO)
VALUES (SEQCATEGORIA.NEXTVAL, 'Kit de Pintura em Aquarela', 'Liberte sua
imaginação com o Kit de Pintura em Aquarela. Explore a magia das cores e crie obras de
arte impressionantes com facilidade.');
INSERT INTO CATEGORIA (CODIGO, DESCRICAO, RESUMO)
VALUES (SEQCATEGORIA.NEXTVAL, 'Carregador Solar Portátil', 'Mantenha-se conectado
em qualquer lugar com o Carregador Solar Portátil. Uma solução sustentável para manter
seus dispositivos carregados durante suas aventuras ao ar livre.');
INSERT INTO CATEGORIA (CODIGO, DESCRICAO, RESUMO)
VALUES (SEQCATEGORIA.NEXTVAL, 'Câmera de Segurança Inteligente', 'Mantenha sua
casa segura com nossa Câmera de Segurança Inteligente. Vigilância em tempo real e
notificações instantâneas para garantir sua tranquilidade.');
INSERT INTO CATEGORIA (CODIGO, DESCRICAO, RESUMO)
VALUES (SEQCATEGORIA.NEXTVAL, 'Smartwatch Esportivo', 'Supere seus limites com
nosso Smartwatch Esportivo. Monitore seu desempenho, receba notificações e
mantenha-se conectado durante seus treinos.');
INSERT INTO CATEGORIA (CODIGO, DESCRICAO, RESUMO)
VALUES (SEQCATEGORIA.NEXTVAL, 'Livros de Ficção Científica', 'Explore mundos
futuristas e conceitos inovadores com nossa coleção de Livros de Ficção Científica. Deixe
sua imaginação voar.');
INSERT INTO CATEGORIA (CODIGO, DESCRICAO, RESUMO)
VALUES (SEQCATEGORIA.NEXTVAL, 'Console de Videogame Portátil', 'Leve a diversão
para onde quiser com nosso Console de Videogame Portátil. Gráficos incríveis e uma
biblioteca de jogos emocionantes.');
INSERT INTO CATEGORIA (CODIGO, DESCRICAO, RESUMO)

VALUES (SEQCATEGORIA.NEXTVAL, 'Plantas de Interior Exóticas', 'Transforme seu
espaço com nossas Plantas de Interior Exóticas. Adicione beleza e purificação do ar à sua
casa ou escritório.');
SELECT * FROM CATEGORIA;
-----------------------------------------------------------------/
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO, CATEGORIA)
VALUES (SEQPRODUTO.NEXTVAL, 'Carregador Solar Portátil', 69.99 ,25);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO, CATEGORIA)
VALUES (SEQPRODUTO.NEXTVAL, 'Kit de Pintura em Aquarela', 35, 24);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO, CATEGORIA)
VALUES (SEQPRODUTO.NEXTVAL, 'Mochila Técnica para Excursões', 99.99, 23);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO, CATEGORIA)
VALUES (SEQPRODUTO.NEXTVAL, 'Fones de Ouvido Bluetooth', 49.90, 22);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO, CATEGORIA)
VALUES (SEQPRODUTO.NEXTVAL, 'Máquina de Café Automática', 499.99,21);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO, CATEGORIA)
VALUES (SEQPRODUTO.NEXTVAL, 'Câmera de Segurança Inteligente', 199.99, 41);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO, CATEGORIA)
VALUES (SEQPRODUTO.NEXTVAL, 'Smartwatch Esportivo', 149.99, 42);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO, CATEGORIA)
VALUES (SEQPRODUTO.NEXTVAL, 'Livros de Ficção Científica', 29.99, 43);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO, CATEGORIA)
VALUES (SEQPRODUTO.NEXTVAL, 'Console de Videogame Portátil', 199.99, 44);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO, CATEGORIA)
VALUES (SEQPRODUTO.NEXTVAL, 'Plantas de Interior Exóticas', 49.99, 45);
-----------------------------------------------------------------/
INSERT INTO FUNCIONARIOSS (CODIGO, NOME, SUPERVISOR)
VALUES (SEQPESSOA.NEXTVAL, 'Gabriela Lima', SEQPESSOA.NEXTVAL);
INSERT INTO FUNCIONARIOSS (CODIGO, NOME, SUPERVISOR)
VALUES (SEQPESSOA.NEXTVAL, 'Lucas Costa', SEQPESSOA.NEXTVAL);
INSERT INTO FUNCIONARIOSS (CODIGO, NOME, SUPERVISOR)
VALUES (SEQPESSOA.NEXTVAL, 'Mariana Santos', 1);
INSERT INTO FUNCIONARIOSS (CODIGO, NOME, SUPERVISOR)
VALUES (SEQPESSOA.NEXTVAL, 'Pedro Oliveira', 1);

INSERT INTO FUNCIONARIOSS (CODIGO, NOME, SUPERVISOR)
VALUES (SEQPESSOA.NEXTVAL, 'Rodrigo Santana', 2);
-----------------------------------------------------------------/
INSERT INTO CLIENTES (CODIGO, NOME, TELEFONE)
VALUES (SEQCLIENTE.NEXTVAL, 'Ana Oliveira', '555-1234');
INSERT INTO CLIENTES (CODIGO, NOME, TELEFONE)
VALUES (SEQCLIENTE.NEXTVAL, 'Pedro Silva', '555-5678');
INSERT INTO CLIENTES (CODIGO, NOME, TELEFONE)
VALUES (SEQCLIENTE.NEXTVAL, 'Mariana Santos', '555-9876');
INSERT INTO CLIENTES (CODIGO, NOME, TELEFONE)
VALUES (SEQCLIENTE.NEXTVAL, 'Lucas Costa', '555-4321');
INSERT INTO CLIENTES (CODIGO, NOME, TELEFONE)
VALUES (SEQCLIENTE.NEXTVAL, 'Isabela Lima', '555-8765');
-----------------------------------------------------------------/
DELETE ENDERECOO
WHERE CODIGO = 5;
INSERT INTO ENDERECOO (CODIGO, CLIENTE, LOGRADURO, NUMERO, CIDADE,
ESTADO)
VALUES (SEQENDERECO.NEXTVAL, 1, 'Rua das Flores', '123', 'Cidade A', 'CA');
INSERT INTO ENDERECOO (CODIGO, CLIENTE, LOGRADURO, NUMERO, CIDADE,
ESTADO)
VALUES (SEQENDERECO.NEXTVAL, 2, 'Avenida Principal', '456', 'Cidade B', 'CB');
INSERT INTO ENDERECOO (CODIGO, CLIENTE, LOGRADURO, NUMERO, CIDADE,
ESTADO)
VALUES (SEQENDERECO.NEXTVAL, 3, 'Travessa do Sol', '789', 'Cidade C', 'CC');
INSERT INTO ENDERECOO (CODIGO, CLIENTE, LOGRADURO, NUMERO, CIDADE,
ESTADO)
VALUES (SEQENDERECO.NEXTVAL, 4, 'Praça Central', '101', 'Cidade D', 'SP');
INSERT INTO ENDERECOO (CODIGO, CLIENTE, LOGRADURO, NUMERO, CIDADE,
ESTADO)
VALUES (SEQENDERECO.NEXTVAL, 5, 'Avenida das Estrelas', '202', 'Cidade E', 'SP');
-----------------------------------------------------------------/
INSERT INTO PEDIDO (CODIGO, CLIENTE, FUNCIONARIO, DTAPEDIDO,
OBSERVACAO)
VALUES (SEQPEDIDO.NEXTVAL, 1, 1, '01-JAN-2023', 'Observação 1');
INSERT INTO PEDIDO (CODIGO, CLIENTE, FUNCIONARIO, DTAPEDIDO,
OBSERVACAO)
VALUES (SEQPEDIDO.NEXTVAL, 2, 1, '06-AUG-2023', 'Observação 2');

INSERT INTO PEDIDO (CODIGO, CLIENTE, FUNCIONARIO, DTAPEDIDO,
OBSERVACAO)
VALUES (SEQPEDIDO.NEXTVAL, 3, 2, '30-JUN-2023', 'Observação 3');
INSERT INTO PEDIDO (CODIGO, CLIENTE, FUNCIONARIO, DTAPEDIDO,
OBSERVACAO)
VALUES (SEQPEDIDO.NEXTVAL, 4, 3, '19-JAN-2023', 'Observação 4');
INSERT INTO PEDIDO (CODIGO, CLIENTE, FUNCIONARIO, DTAPEDIDO,
OBSERVACAO)
VALUES (SEQPEDIDO.NEXTVAL, 5, 2, '9-MAR-2023', 'Observação 5');
-----------------------------------------------------------------/
INSERT INTO ITEM (PRODUTO,PEDIDO,QUANTIDADE)
VALUES (42,3,3);
INSERT INTO ITEM (PRODUTO,PEDIDO,QUANTIDADE)
VALUES (43,4,3);
INSERT INTO ITEM (PRODUTO,PEDIDO,QUANTIDADE)
VALUES (44,5,3);
INSERT INTO ITEM (PRODUTO,PEDIDO,QUANTIDADE)
VALUES (45,6,3);
INSERT INTO ITEM (PRODUTO,PEDIDO,QUANTIDADE)
VALUES (46,7,3);
-----------------------------------------------------------------/
--01) Listar todos os produtos (Código, descrição e categoria) em ordem crescente de
código/
SELECT P.CODIGO, P.DESCRICAO, C.DESCRICAO
FROM PRODUTOS P, CATEGORIA C
WHERE C.CODIGO = P.CATEGORIA
ORDER BY CODIGO ASC;
SELECT * FROM ENDERECOO;
--02)Listar os clientes (Código, nome, cidade) somente do estado de “SP” ordenado por
cidade em ordem alfabética e
--posteriormente por nome cliente em ordem alfabética também/
SELECT C.CODIGO, C.NOME, E.CIDADE
FROM CLIENTES C, ENDERECOO E
WHERE C.CODIGO = E.CLIENTE AND
ESTADO = 'SP'
ORDER BY CIDADE ASC ,CLIENTE ASC;
--03) Listar o nome de todos os funcionários e o nome de seus respectivos supervisores/
SELECT F.NOME, FF.NOME

FROM FUNCIONARIOSS F, FUNCIONARIOSS FF
WHERE FF.CODIGO = F.SUPERVISOR;

--04) Listar todos os pedidos (Código e Data) em que tenham um determinado produto que
seja passado por parâmetro./
SELECT P.CODIGO, P.DTAPEDIDO
FROM PEDIDO P
WHERE P.CODIGO = &FILTRO_PEDIDO;
SELECT * FROM PEDIDO;
--05) Listar os 10 produtos (Código produto, descrição e descrição da categoria) mais
vendidos nos últimos 180 dias./
SELECT P.CODIGO, P.DESCRICAO, C.DESCRICAO
FROM PRODUTOS P, CATEGORIA C, PEDIDO P2, ITEM I
WHERE P.CATEGORIA = C.CODIGO
AND P.CATEGORIA = I.PRODUTO
AND I.PEDIDO = P2.CODIGO
AND P2.DTAPEDIDO >= SYSDATE-180
GROUP BY P.CODIGO, P.DESCRICAO, C.DESCRICAO
ORDER BY (I.PRODUTO)
FETCH FIRST 10 ROWS ONLY;

--06)Construa uma View contendo todos os dados de clientes e seus respectivos
endereços/
CREATE OR REPLACE VIEW VISU_CLIENTE AS
SELECT C.CODIGO,
C.NOME,
C.TELEFONE,
E.CODIGO,
E.LOGRADURO,
E.NUMERO,
E.CIDADE,
E.ESTADO
FROM CLIENTES C, ENDERECOO E
WHERE E.CLIENTE = C.CODIGO;
--07)Construa uma função que recupere o valor total do pedido/

--8) Construa uma procedure que receba como parâmetro o código da categoria e um
percentual.
--A rotina deverá acrescer o valor do produtos produtos de uma determinada categoria com
o
--percentual de acréscimo recebido por parâmetro.

CREATE OR REPLACE PROCEDURE ADD_VALOR (CATEG_COD NUMBER,
PERCENTUAL NUMBER)
IS
BEGIN
UPDATE PRODUTOS
SET PRECO=PRECO+ (PRECO*PERCENTUAL/100)
WHERE CATEGORIA = CATEG_COD;
COMMIT;
END ADD_VALOR
